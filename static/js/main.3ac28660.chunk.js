(this["webpackJsonpcrud-redux-thunk"]=this["webpackJsonpcrud-redux-thunk"]||[]).push([[0],{39:function(e,t,n){e.exports=n(75)},46:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),u=n.n(c),o=n(15),l=(n(46),function(){return r.a.createElement("nav",{className:"header"},r.a.createElement("div",null,r.a.createElement("h1",{className:"header__title"},"Juice store")),r.a.createElement("button",{className:"button button--new"},r.a.createElement(o.b,{to:"/products/new"},"Add product")))}),s=n(2),i=n.n(s),p=n(3),d=n(14),m=n.n(d),E=n(36),f=n.n(E).a.create({baseURL:"http://localhost:4000/"});function b(e){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(f.post("/products",e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))}function O(e){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(f.delete("/products/".concat(e)));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))}function _(e){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(f.put("/products/".concat(e.id),e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))}var D=function(e){return{type:"ADD_PRODUCT_OK",payload:e}};var h=function(e){return{type:"RETRIEVE_PRODUCT_DELETE",payload:e}};var y=function(e){return{type:"PRODUCT_EDITED_OK",payload:e}};var R=n(13),v=(n(71),function(e){var t=e.name,n=e.price,a=e.id,c=Object(p.b)(),u=Object(R.f)(),o=function(e){m.a.fire({title:"Are you sure you want to delete the product?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#62a086",cancelButtonColor:"#f66b61",confirmButtonText:"Yes, delete it!"}).then((function(t){t.value&&c(function(e){return function(t){return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t(h(e)),n.prev=1,n.next=4,i.a.awrap(O(e));case 4:t({type:"PRODUCT_DELETED_OK"}),m.a.fire({title:"Deleted!",text:"The product has been deleted.",icon:"success",confirmButtonColor:"#62a086"}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),t({type:"PRODUCT_DELETED_ERROR",payload:!0});case 11:case"end":return n.stop()}}),null,null,[[1,8]])}}(e))}))};return r.a.createElement("tr",null,r.a.createElement("td",null,t),r.a.createElement("td",{className:"prices"},n," $"),r.a.createElement("td",{className:"button-container"},r.a.createElement("button",{className:"button button--edit",type:"button",onClick:function(){return function(e){c(function(e){return function(t){t(function(e){return{type:"RETRIEVE_PRODUCT_EDITED",payload:e}}(e))}}(e)),u.push("products/edit/".concat(a))}(e)}},"Edit"),r.a.createElement("button",{className:"button button--delete",type:"button",onClick:function(){return o(a)}},"Delete")))}),T=(n(72),function(){var e=Object(p.b)();Object(a.useEffect)((function(){i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(e((function(e){var t,n;return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e({type:"BEGIN_PRODUCTS_DOWNLOAD",payload:!0}),a.prev=1,a.next=4,i.a.awrap(i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.awrap(f.get("/products"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}})));case 4:t=a.sent,n=t.data,e({type:"PRODUCTS_DOWNLOAD_OK",payload:n}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),e({type:"PRODUCTS_DOWNLOAD_ERROR",payload:!0});case 12:case"end":return a.stop()}}),null,null,[[1,9]])})));case 2:case"end":return t.stop()}}))}),[]);var t=Object(p.c)((function(e){return e.products.products})),n=Object(p.c)((function(e){return e.products.error})),c=Object(p.c)((function(e){return e.products.loading}));return r.a.createElement("div",null,r.a.createElement("h2",{className:"table__title"},"Products"),n?r.a.createElement("p",null,"An error ocurred"):null,c?r.a.createElement("p",null,"Loading..."):null,r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",{id:"table__title-price"},"Price"),r.a.createElement("th",{id:"table__title-action"},"Actions"))),r.a.createElement("tbody",null,0===t.length?"No products yet.":t.map((function(e){return r.a.createElement(v,{key:e.id,name:e.name,price:e.price,id:e.id})})))))}),w=n(17);function C(e){return function(t){t(function(e){return{type:"SHOW_ALERT",payload:e}}(e))}}n(73);var N=function(e){var t=e.history,n=Object(a.useState)(""),c=Object(w.a)(n,2),u=c[0],o=c[1],l=Object(a.useState)(0),s=Object(w.a)(l,2),d=s[0],E=s[1],f=Object(p.b)(),O=Object(p.c)((function(e){return e.products.loading})),_=Object(p.c)((function(e){return e.products.error})),h=Object(p.c)((function(e){return e.alert.alert})),y=function(e){return f(function(e){return function(t){return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t({type:"ADD_PRODUCT",payload:!0}),n.prev=1,n.next=4,i.a.awrap(b(e));case 4:t(D(e)),m.a.fire({title:"Added!",text:"The product has been added successfully",icon:"success",confirmButtonColor:"#62a086"}),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(1),t({type:"ADD_PRODUCT_ERROR",payload:!0}),m.a.fire({icon:"error",title:"Error",text:"An error ocurred. Please, try it again."});case 12:case"end":return n.stop()}}),null,null,[[1,8]])}}(e))};return r.a.createElement("div",null,r.a.createElement("h2",{className:"table__title"},"New product"),r.a.createElement("form",{className:"form",onSubmit:function(e){return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.preventDefault(),!(""===u.trim()||d<=0)){n.next=5;break}return f(C({msg:"All fields are required."})),n.abrupt("return");case 5:return f((function(e){e({type:"HIDE_ALERT",payload:null})})),n.next=8,i.a.awrap(y({name:u,price:d}));case 8:t.push("/");case 9:case"end":return n.stop()}}))}},r.a.createElement("section",{className:"form__section"},r.a.createElement("label",null,"Product name"),r.a.createElement("input",{type:"text",placeholder:"Product name",name:"name",value:u,onChange:function(e){return o(e.target.value)}})),r.a.createElement("section",{className:"form__section"},r.a.createElement("label",null,"Product price"),r.a.createElement("input",{type:"number",name:"price",min:"0",value:d,onChange:function(e){return E(Number(e.target.value))}})),r.a.createElement("div",{className:"button__container"},r.a.createElement("button",{type:"button",className:"button button--cancel",onClick:function(){t.push("/")}},"Cancel"),r.a.createElement("button",{className:"button button--confirm"},"Confirm")),h?r.a.createElement("p",{className:"alert-message"},h.msg):null),O?r.a.createElement("p",null,"Loading..."):null,_?r.a.createElement("p",null,"Ups! An error ocurred."):null)},P=n(20),j=n(5),x=(n(74),function(){var e=Object(R.f)(),t=Object(p.b)(),n=Object(a.useState)({name:"",price:""}),c=Object(w.a)(n,2),u=c[0],o=c[1],l=Object(p.c)((function(e){return e.products.editProduct}));Object(a.useEffect)((function(){o(l)}),[l]);var s=function(e){o(Object(j.a)({},u,Object(P.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",null,r.a.createElement("h2",{className:"table__title"},"Edit product"),r.a.createElement("form",{className:"form",onSubmit:function(n){n.preventDefault(),t(function(e){return function(t){return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t({type:"BEGIN_EDIT_PRODUCT"}),n.prev=1,n.next=4,i.a.awrap(_(e));case 4:t(y(e)),m.a.fire({title:"Updated!",text:"The product has been updated.",icon:"success",confirmButtonColor:"#62a086"}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),t({type:"PRODUCT_EDITED_ERROR",payload:!0});case 11:case"end":return n.stop()}}),null,null,[[1,8]])}}(u)),e.push("/")}},r.a.createElement("section",{className:"form__section"},r.a.createElement("label",null,"Product name"),r.a.createElement("input",{type:"text",name:"name",value:u.name,onChange:s})),r.a.createElement("section",{className:"form__section"},r.a.createElement("label",null,"Product price"),r.a.createElement("input",{type:"number",name:"price",min:"0",value:u.price,onChange:s})),r.a.createElement("div",{className:"button__container"},r.a.createElement("button",{type:"button",className:"button button--cancel",onClick:function(){e.push("/")}},"Cancel"),r.a.createElement("button",{className:"button button--confirm"},"Confirm"))))}),g=n(12),U=n(37),A=n(38),L={products:[],error:!1,loading:!1,deleteProduct:null},I={alert:null},S=Object(g.c)({products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BEGIN_PRODUCTS_DOWNLOAD":case"ADD_PRODUCT":return Object(j.a)({},e,{loading:t.payload});case"ADD_PRODUCT_OK":return Object(j.a)({},e,{loading:!1,products:[].concat(Object(A.a)(e.products),[t.payload])});case"ADD_PRODUCT_ERROR":case"PRODUCTS_DOWNLOAD_ERROR":case"PRODUCT_DELETED_ERROR":case"PRODUCT_EDITED_ERROR":return Object(j.a)({},e,{loading:!1,error:t.payload});case"PRODUCTS_DOWNLOAD_OK":return Object(j.a)({},e,{loading:!1,error:null,products:t.payload});case"RETRIEVE_PRODUCT_DELETE":return Object(j.a)({},e,{deleteProduct:t.payload});case"PRODUCT_DELETED_OK":return Object(j.a)({},e,{products:e.products.filter((function(t){return t.id!==e.deleteProduct})),deleteProduct:null});case"RETRIEVE_PRODUCT_EDITED":return Object(j.a)({},e,{editProduct:t.payload});case"PRODUCT_EDITED_OK":return Object(j.a)({},e,{editProduct:null,products:e.products.map((function(e){return e.id===t.payload.id?e=t.payload:e}))});default:return e}},alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_ALERT":return Object(j.a)({},e,{alert:t.payload});case"HIDE_ALERT":return Object(j.a)({},e,{alert:null});default:return e}}}),k=Object(g.e)(S,Object(g.d)(Object(g.a)(U.a),"object"===typeof window&&(window.__REDUX_DEVTOOLS_EXTENSION__,1)?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}));var B=function(){return r.a.createElement(o.a,null,r.a.createElement(p.a,{store:k},r.a.createElement(l,null),r.a.createElement("div",null,r.a.createElement(R.c,null,r.a.createElement(R.a,{exact:!0,path:"/",component:T}),r.a.createElement(R.a,{exact:!0,path:"/products/new",component:N}),r.a.createElement(R.a,{exact:!0,path:"/products/edit/:id",component:x})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[39,1,2]]]);
//# sourceMappingURL=main.3ac28660.chunk.js.map